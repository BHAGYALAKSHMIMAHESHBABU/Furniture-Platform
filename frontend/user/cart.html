<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Furnovera - Cart</title>
  <link rel="stylesheet" href="index.css" />
  <link rel="stylesheet" href="wishlist.css" />
  <style>
   
    body {
      background-color: #f5f5f5;
      color: #222;
      font-family: 'Poppins', sans-serif;
    }

    .cart-container h1 {
      text-align: center;
      margin-bottom: 10px;
    }

    #welcome-user {
      text-align: center;
      font-size: 18px;
      color: #444;
      margin-bottom: 25px;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
    }

    body {
      background-color: #f5f5f5;
      color: #222;
    }

    header.heads {
      background-color: rgb(242, 220, 108);
      padding: 10px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      position: sticky;
      top: 0;
      z-index: 1000;
    }

    .lefthead, .righthead {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .side {
      background: none;
      border: none;
      cursor: pointer;
    }

    .sideImg {
      width: 28px;
      height: 28px;
    }

    .logo img {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      object-fit: cover;
    }

    .logo h2 {
      font-size: 22px;
      font-weight: 600;
      color: #222;
    }

    nav.nav-menu {
      flex: 1;
      display: flex;
      justify-content: center;
      gap: 25px;
    }

    nav.nav-menu a {
      text-decoration: none;
      color: #222;
      font-size: 16px;
      font-weight: 500;
      transition: color 0.3s;
    }

    nav.nav-menu a:hover {
      color: #000;
    }

    .righthead button {
      background: none;
      border: none;
      cursor: pointer;
    }

    .righthead img {
      width: 28px;
      height: 28px;
    }

    .sidebar {
      width: 250px;
      height: 100vh;
      background-color: #fff4cc;
      position: fixed;
      top: 0;
      left: -300px;
      transition: left 0.3s ease;
      padding: 30px 20px;
      box-shadow: 2px 0 8px rgba(0,0,0,0.1);
      z-index: 2000;
    }

    .sidebar.show {
      left: 0;
    }

    .sidebar h2 {
      font-size: 20px;
      margin-bottom: 30px;
    }

    .sidebar ul {
      list-style: none;
      padding: 0;
    }

    .sidebar ul li {
      margin: 20px 0;
    }

    .sidebar ul li a {
      text-decoration: none;
      color: #333;
      font-size: 16px;
      transition: color 0.2s;
    }

    .sidebar ul li a:hover {
      color: #000;
    }

    .cart-container {
      flex: 1;
      padding: 40px 20px;
      max-width: 1000px;
      margin: auto;
      width: 100%;
      box-sizing: border-box;
    }

    .cart-container h1 {
      text-align: center;
      margin-bottom: 30px;
    }

    .cart-grid {
      display: grid;
      gap: 20px;
      margin-top: 20px;
    }

    .cart-item {
      display: flex;
      gap: 20px;
      padding: 15px;
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .cart-item img {
      width: 100px;
      height: 100px;
      object-fit: cover;
      border-radius: 8px;
    }

    .item-details h4 {
      margin: 0;
      font-size: 18px;
    }

    .item-details p {
      margin: 5px 0;
      font-weight: bold;
    }

    .remove-btn {
      background-color: #c3372d;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 4px;
      cursor: pointer;
      margin-top: 10px;
    }

    .cart-summary {
      margin-top: 30px;
      text-align: right;
      padding: 20px;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .checkout-btn {
      background-color: #4caf50;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
    }

    .qty-controls {
      display: flex;
      align-items: center;
      gap: 12px;
      margin: 12px 0;
    }

    .qty-btn {
      width: 36px;
      height: 36px;
      font-size: 22px;
      font-weight: bold;
      background-color: #e0e0e0;
      border: none;
      border-radius: 50%;
      cursor: pointer;
    }

    .qty-display {
      font-size: 18px;
      font-weight: 600;
      min-width: 30px;
      text-align: center;
    }

    #empty-message {
      text-align: center;
      color: #888;
      font-size: 16px;
      margin-top: 40px;
    }

    footer {
      background-color: #222;
      color: #fff;
      padding: 40px 20px 20px;
      margin-top: 60px;
    }

    .footer-content {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      max-width: 1200px;
      margin: auto;
    }

    .footer-brand h3 {
      font-size: 20px;
      margin-bottom: 10px;
    }

    .footer-brand p {
      font-size: 14px;
      color: #ccc;
    }

    .footer-links ul {
      list-style: none;
      padding: 0;
    }

    .footer-links h4 {
      margin-bottom: 10px;
    }

    .footer-links li {
      margin-bottom: 8px;
    }

    .footer-links a {
      text-decoration: none;
      color: #bbb;
    }

    .footer-contact h4 {
      margin-bottom: 10px;
    }

    .footer-contact p {
      margin-bottom: 6px;
      font-size: 14px;
    }

    .footer-bottom {
      text-align: center;
      margin-top: 20px;
      font-size: 13px;
      color: #aaa;
    }

    .welcome-msg {
  font-size: 15px;
  color: #222;
  font-weight: 600;
  background-color: #fff6cd;
  padding: 6px 12px;
  border-radius: 20px;
  margin-right: 10px;
  box-shadow: 0 1px 4px rgba(0,0,0,0.1);
}

  </style>
  </style>
</head>

<body>
<!-- HEADER -->
<header class="heads">
  <div class="lefthead">
    <button class="side" onclick="toggleSidebar()">
      <img class="sideImg" src="https://img.icons8.com/?size=100&id=16247&format=png&color=000000" alt="menu" />
    </button>
    <div class="logo">
      <img src="img/ChatGPT Image Jun 29, 2025, 10_23_13 PM.png" alt="logo" />
      <h2>Furnovera</h2>
    </div>
  </div>
 <nav class="nav-menu">
  <a href="index.html">Home</a>
  <a href="product.html">Shop</a>
  <a href="#!" onclick="document.getElementById('explore').scrollIntoView({ behavior: 'smooth' });">Categories</a>
  <a href="wishlist.html">Wishlist</a>
  <a href="cart.html">Cart</a>
  <a href="contact.html">Contact</a>
</nav>

 <div class="righthead">
  <button class="log" id="loginBtn">
    <img class="logimg" src="https://img.icons8.com/?size=100&id=fJ7hcfUGpKG7&format=png&color=1A1A1A" alt="login" />
  </button>
  <button onclick="location.href='wishlist.html'">
    <img src="https://img.icons8.com/?size=100&id=87&format=png&color=000000" alt="wishlist" />
  </button>
  <button onclick="location.href='cart.html'">
    <img src="https://img.icons8.com/?size=100&id=ii6Lr4KivOiE&format=png&color=000000" alt="cart" />
  </button>
</div>

</header>

  <!-- SIDEBAR -->
  <div class="sidebar">
    <ul>
      <h2>Menu</h2>
      <li><a href="Profile.html">Profile</a></li>
      <li><a href="order.html">Orders</a></li>
      <li><a href="signout.html">Signout</a></li>
    </ul>
  </div>
</header>


<main class="cart-container">
  <h1>Your Cart</h1>
  <h2 id="welcome-user"></h2>
  <div class="cart-grid" id="cart-items"></div>
  <p id="empty-message" style="display: none;">Your cart is currently empty.</p>
  <div class="cart-summary" id="cart-summary" style="display: none;">
    <h3>Total: â‚¹<span id="total-price">0</span></h3>
    <button class="checkout-btn" onclick="checkout()">Proceed to Checkout</button>
  </div>
</main>



<footer>
  <div class="footer-content">
    <div class="footer-brand">
      <h3>Furnovera</h3>
      <p>Your trusted partner for premium furniture and lifestyle.</p>
    </div>
    <div class="footer-links">
      <h4>Quick Links</h4>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="product.html">Shop</a></li>
        <li><a href="profile.html">Profile</a></li>
        <li><a href="order.html">Orders</a></li>
      </ul>
    </div>
    <div class="footer-contact">
      <h4>Contact</h4>
      <p>Email: support@furnovera.com</p>
      <p>Phone: +91-987654310</p>
    </div>
  </div>
  <div class="footer-bottom">
    <p>Â© 2025 Furnovera. All rights reserved.</p>
  </div>
</footer>
<script>
  const baseURL = "https://furnovera-backend.onrender.com";
const loginBtn = document.querySelector(".log");

  function toggleSidebar() {
    const sidebar = document.querySelector(".sidebar");
    sidebar.classList.toggle("show");
  }

  function loadCartItems() {
    const cartItems = JSON.parse(localStorage.getItem("cart")) || [];
    const container = document.getElementById("cart-items");
    const summary = document.getElementById("cart-summary");
    const emptyMsg = document.getElementById("empty-message");
    const totalPriceElement = document.getElementById("total-price");

    container.innerHTML = "";
    let total = 0;

    if (cartItems.length === 0) {
      emptyMsg.style.display = "block";
      summary.style.display = "none";
      return;
    }

    emptyMsg.style.display = "none";
    summary.style.display = "block";

    cartItems.forEach((item, index) => {
      const price = item.discount || item.price;
      const qty = item.qty || 1;
      const itemTotal = price * qty;
      total += itemTotal;

      const imageUrl = item.imageUrl.startsWith("http") ? item.imageUrl : `${baseURL}${item.imageUrl}`;

      const card = document.createElement("div");
      card.className = "cart-item";
      card.innerHTML = `
        <img src="${imageUrl}" alt="${item.name}" />
        <div class="item-details">
          <h4>${item.name}</h4>
          <p>Price: â‚¹${price}</p>
          <div class="qty-controls">
            <button class="qty-btn" onclick="updateQty(${index}, -1)">âˆ’</button>
            <span class="qty-display" id="qty-${index}">${qty}</span>
            <button class="qty-btn" onclick="updateQty(${index}, 1)">+</button>
          </div>
          <p>Total: â‚¹${itemTotal}</p>
          <button class="remove-btn" onclick="removeFromCart(${index})">Remove</button>
        </div>
      `;
      container.appendChild(card);
    });

    totalPriceElement.textContent = total;
  }

  function updateQty(index, delta) {
    let cartItems = JSON.parse(localStorage.getItem("cart")) || [];
    if (!cartItems[index]) return;
    cartItems[index].qty = Math.max(1, (cartItems[index].qty || 1) + delta);
    localStorage.setItem("cart", JSON.stringify(cartItems));
    loadCartItems();
  }

  function removeFromCart(index) {
    let cartItems = JSON.parse(localStorage.getItem("cart")) || [];
    cartItems.splice(index, 1);
    localStorage.setItem("cart", JSON.stringify(cartItems));
    loadCartItems();
  }

  function checkout() {
  const user = JSON.parse(localStorage.getItem("user"));
  if (!user || !user._id) {
    alert("Please login before checking out.");
    window.location.href = "login.html";
    return;
  }
  window.location.href = "checkout.html";
}

document.addEventListener("DOMContentLoaded", () => {
  const loginBtn = document.querySelector(".log");
  const loginImg = document.querySelector(".logimg");
  const token = localStorage.getItem("token");
  const user = JSON.parse(localStorage.getItem("user"));
 console.log("ðŸ”‘ Token:", token);
console.log("ðŸ‘¤ User ID:", user._id);
function checkout() {
    const userId = localStorage.getItem("userId");
    if (!userId) {
      alert("Please login before checking out.");
      window.location.href = "login.html";
      return;
    }
    window.location.href = "checkout.html";
  }
  if (token && user) {
    // Hide login icon
    if (loginBtn) loginBtn.style.display = "none";

    // Show welcome message
    const welcomeMsg = document.createElement("div");
    welcomeMsg.textContent = `Welcome, ${user.name}!`;
    welcomeMsg.classList.add("welcome-msg");

    document.querySelector(".righthead").prepend(welcomeMsg);
  } else {
    // If not logged in
    if (loginBtn && loginImg) {
      loginBtn.onclick = () => location.href = "login.html";
      loginImg.src = "https://img.icons8.com/?size=100&id=fJ7hcfUGpKG7&format=png&color=1A1A1A";
      loginImg.alt = "login";
    }
  }
  loadCartItems(); 
});


</script>


<!-- <script src="index.js"></script> -->
</body>
</html>
